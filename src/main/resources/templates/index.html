<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<link rel="icon" type="image/x-icon" href="/static/image/favicon.ico"/>
<body>
你好, 今天是<p id="dateValue" th:text="${#dates.format(#dates.createNow(), 'yyyy年MM月dd日')}" th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}"></p>

<br/>
请选择检查对象：<select id="groupId"></select>
<input th:type="button" id="checkTheGroup" th:value="确定"/>
</body>
<script th:src="@{/js/jquery-3.3.1.min.js}"></script>
<script th:inline="javascript">

    var basePath = [[${#httpServletRequest.getScheme() + "://" + #httpServletRequest.getServerName() + ":" + #httpServletRequest.getServerPort() + #httpServletRequest.getContextPath()}]];

    //分组下拉框
    var getAllGroup = function () {
        $.ajax({
            url:basePath + "/workGroup/findAllList",
            type:"GET",
            success:function (data) {
                console.log(data);
                var _html = '';
                if (data.success) {
                    $(data.data).each(function (i, item) {
                        _html += ('<option value="'+item.id+'">'+item.name+'</option>');
                    });
                    $("#groupId").html(_html);
                }
            },
            error:function (data) {
                console.log(data);
            }
        });
    };

    $("#checkTheGroup").on('click', function () {
        var dateValue = $("#dateValue").attr("value");
        var groupId = $('select option:selected').val();
        var groupName = $('select option:selected').text();

        /*<![CDATA[*/
        window.location.href = basePath + '/collect?dateValue=' + dateValue + '&groupId=' + groupId + '&groupName=' + groupName;
        /*]]>*/
    });

    getAllGroup();
</script>
</html>